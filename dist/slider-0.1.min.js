(function(b){var e=function(a,b){for(var d in b)a.style[d]=b[d]},c=b.document.classList?function(a,b){a.classList.add(b)}:function(a,b){a.className+=" "+b},g=b.document.classList?function(a,b){a.classList.remove(b)}:function(a,b){a.className=a.className.replace(RegExp(b,"g"),"")},f=function(a){return a}.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}};b.Slider=function(a){this.options=a||{};if(this.options.container)this.container=
this.options.container;else throw Error("Slider.js: need a container DOM element!");this.on=!0;this.min=this.options.min||0;this.max=this.options.max||100;this.step=this.options.step||1;this.width=this.options.width||300;this.height=this.options.height||50;this.buttonWidth=this.options.buttonWidth||20;this.labelHeight=this.options.labelHeight||30;if(this.hasLabel=this.options.label||!1)this.labelf=this.options.labelf||function(a){return a};if(this.hasProgress=this.options.progress||!1)this.progressHeight=
this.options.progressHeight||this.buttonWidth/2;this.hasSnapToStep=this.options.snapToStep||!1;this.f=this.options.f||function(){};this.initPos=this.options.initPos||this.min;this.range=this.max-this.min;this.pxRange=this.width-this.buttonWidth;this.sliderCls=this.options.sliderCls||"slider";this.labelCls=this.options.labelCls||"slider-label";this.barCls=this.options.barCls||"slider-bar";this.btnCls=this.options.btnCls||"slider-button";this.progressCls=this.options.progressCls||"slider-progress";
this.progressValCls=this.options.progressValCls||"slider-progress-val";this.activeCls=this.options.activeCls||"slider-active";this.elt=b.document.createElement("div");this.bar=b.document.createElement("div");this.button=b.document.createElement("div");e(this.elt,{width:this.width+"px",margin:"auto",position:"relative",boxSizing:"border-box",webkitTransform:"translate3d(0,0,0)"});e(this.bar,{display:"block",margin:"auto",position:"relative",width:"100%",height:this.buttonWidth+"px",webkitTransform:"translate3d(0,0,0)"});
e(this.button,{display:"block",margin:"auto",width:this.buttonWidth+"px",height:"100%",position:"absolute",top:0,left:0,webkitTransform:"translate3d(0,0,0)"});this.hasLabel&&(this.label=b.document.createElement("div"),e(this.label,{display:"block",margin:"auto",width:"100%",height:this.labelHeight+"px",textAlign:"center",webkitTransform:"translate3d(0,0,0)"}),c(this.label,this.labelCls),this.elt.appendChild(this.label));this.hasProgress&&(this.progress=b.document.createElement("div"),this.progressVal=
b.document.createElement("div"),e(this.progress,{width:"100%",height:this.progressHeight+"px",position:"absolute",webkitTransform:"translate3d(0,0,0)",bottom:(this.buttonWidth-this.progressHeight)/2+"px"}),e(this.progressVal,{width:"100%",height:"100%",position:"absolute",bottom:0,webkitTransform:"translate3d(0,0,0)"}),c(this.progress,this.progressCls),c(this.progressVal,this.progressValCls),this.progress.appendChild(this.progressVal),this.bar.appendChild(this.progress));c(this.button,this.btnCls);
c(this.bar,this.barCls);c(this.elt,this.sliderCls);this.bar.appendChild(this.button);this.elt.appendChild(this.bar);this.container.appendChild(this.elt);this.set(this.initPos,!0,!0);this.timestamp=(new b.Date).getTime();this._onButtonTouchStart=f(this.onButtonTouchStart,this);this._onButtonTouchMove=f(this.onButtonTouchMove,this);this._onButtonTouchEnd=f(this.onButtonTouchEnd,this);return this};b.Slider.prototype.bind=function(){this.button.addEventListener("touchstart",this._onButtonTouchStart,!0);
return this};b.Slider.prototype.unbind=function(){this.button.removeEventListener("touchstart",this.onButtonTouchStart);return this};b.Slider.prototype.onButtonTouchStart=function(a){this.on&&(a.preventDefault(),a.stopPropagation(),this.button.addEventListener("touchmove",this._onButtonTouchMove,!0),this.button.addEventListener("touchend",this._onButtonTouchEnd,!0),a=a.targetTouches.item(0),this.startX=a.clientX,this.touchId=a.identifier,c(this.button,this.activeCls))};b.Slider.prototype.onButtonTouchMove=
function(a){var b=a.targetTouches.item(0),d=b.clientX-this.startX;b.identifier==this.touchId&&(a.preventDefault(),a.stopPropagation(),a=this.pos+d,this.delta=0>=a?0:a>this.pxRange?this.pxRange:a,this._translate(this.delta),this._renderBar(this.delta),this._update())};b.Slider.prototype.onButtonTouchEnd=function(a){a.changedTouches.item(0).identifier===this.touchId&&(this.pos=this.delta,this.hasSnapToStep?this._update(!0,!1,!0):this._update(!0),g(this.button,this.activeCls),this.button.removeEventListener("touchmove",
this._onButtonTouchMove),this.button.removeEventListener("touchend",this._onButtonTouchEnd))};b.Slider.prototype.val=function(){return this._toStep(this.range/this.pxRange*this.delta+this.min)};b.Slider.prototype.set=function(a,b,d){a>=this.min&&a<=this.max&&(a=this._toStep(a),this.delta=this.pos=this._toPos(a),this._translate(this.pos),this._renderBar(this.pos),this.lastVal=a,this._update(b,d))};b.Slider.prototype._translate=function(a){this.button.style.webkitTransform="translate3d("+a+"px, 0,0)"};
b.Slider.prototype.start=function(){this.on=!0};b.Slider.prototype.stop=function(){this.on=!1};b.Slider.prototype._update=function(a,c,d){if(a||100<=(new b.Date).getTime()-this.timestamp)a=this.val(),d&&(this._renderBar(this.pos=this._toPos(a)),this._translate(this.pos)),!c&&a!=this.lastVal&&this.f(this.lastVal=a),this.hasLabel&&(this.label.innerText=this.labelf(a)),this.timestamp=(new b.Date).getTime()};b.Slider.prototype._renderBar=function(a){var b=this;this.hasProgress&&setTimeout(function(){b.progressVal.style.width=
a+10+"px"},0)};b.Slider.prototype._toStep=function(a){return Math.round(a/this.step)*this.step};b.Slider.prototype._toPos=function(a){return Math.round((a-this.min)*this.pxRange/this.range)}})(window);
